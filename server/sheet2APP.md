# sheet2App

# user

## POST Delete a user

POST http://xxx:3000/user/deleteUser

> Body Request parameter

```json
{
  "id": 1
}
```

### Request parameter

|Title|Position|Type|Mandatory|state|
|---|---|---|---|---|
|Authorization|header|string| Yes |token|
|id|body|int| Yes |userId|

> Return example

```json
{
  "code": 200,
  "msg": "Operation Success!",
  "data": 1
}
```

### Return result

|Status code|Status code meaning|Description|
|---|---|---|
|200|SUCCESS|Success|
|401|FAIL|Invalid token|
|404|FAIL|Request method not found|
|500|FAIL|Server error|

### Return data structure
|Title|Type|Description|Remarks|
|---|---|---|---|
|code|string| Status code ||
|msg|string| Returned message ||
|data|int| Returned data||

## POST User login (and sign up)

POST http://xxx:3000/login

> Body Request parameter

```json
{
  "userName": "David",
  "googleAccount": "David@gmail.com",
  "googleToken": "tokenxxxxxxxx"
}
```

### Request parameter
|Title|Position|Type|Mandatory|state|
|---|---|---|---|---|
|Authorization|header|string| Yes |token|
|userName|body|string| Yes |User name|
|googleAccount|body|string| Yes |Google email|
|googleToken|body|string| Yes |Google token|
> Return example

```json
{
  "code": 200,
  "msg": "Operation Success!",
  "data": {
    "data": {
      "id": 7,
      "userName": "David",
      "googleAccount": "David@gmail.com",
      "googleToken": "tokenxxxxxxxx",
      "createdAt": "2023-03-19T03:48:09.000Z",
      "updatedAt": "2023-03-19T03:48:09.000Z"
    },
    "token": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6NywidXNlck5hbWUiOiJsaXNpIiwiZ29vZ2xlQWNjb3VudCI6Imxpc2lAZ21haWwuY29tIiwiaWF0IjoxNjc5MjI1MDI5LCJleHAiOjE2Nzk0ODQyMjl9.o3_76jbKl4_mMC9HpsIdjZwBWqkuKs6i52iZGOAqB2U"
  }
}
```

### Return result
|Status code|Status code meaning|Description|
|---|---|---|
|200|SUCCESS|Success|
|401|FAIL|Invalid token|
|404|FAIL|Request method not found|
|500|FAIL|server error|

### Return data structure
|Title|Type|Description|Remarks|
|---|---|---|---|
|code|string| Status code ||
|msg|string| Returned message ||
|data|string| Returned data||

### data parameter specification
|Title|Type|Description|Remarks|
|---|---|---|---|
|id|int| User id ||
|userName|string| User name ||
|googleAccount|string| Google email||
|googleToken|string| Google token||
|createdAt|string| Creation time||
|updatedAt|string| Update time||
|token|string| Token generated by back end||

## POST Query user list

POST http://xxx:3000/user/getUserList

> Body Request parameter

```json
{}
```

### Request parameter

|Title|Position|Type|Mandatory|state|
|---|---|---|---|---|
|Authorization|header|string| Yes |token|
|body|body|object| No |none|

> Return example

```json
{
  "code": 200,
  "msg": "Operation Success!",
  "data": [
    {
      "id": 6,
      "userName": "Joe",
      "googleAccount": "Joe@gmail.com",
      "googleToken": "tokenxxxxxxxx",
      "createdAt": "2023-03-19T03:41:13.000Z",
      "updatedAt": "2023-03-19T03:42:23.000Z"
    },
    {
      "id": 7,
      "userName": "David",
      "googleAccount": "David@gmail.com",
      "googleToken": "tokenyyyyyyyyy",
      "createdAt": "2023-03-19T03:48:09.000Z",
      "updatedAt": "2023-03-19T03:48:09.000Z"
    }
  ]
}
```

### Return result
|Status code|Status code meaning|Description|
|---|---|---|
|200|SUCCESS|Success|
|401|FAIL|Invalid token|
|404|FAIL|Request method not found|
|500|FAIL|server error|

### Return data structure
|Title|Type|Description|Remarks|
|---|---|---|---|
|code|string| Status code ||
|msg|string| Returned message ||
|data|string| Returned data||

### data parameter specification
|Title|Type|Description|Remarks|
|---|---|---|---|
|id|int| User id ||
|userName|string| User name ||
|googleAccount|string| Google email||
|googleToken|string| Google token||
|createdAt|string| Creation time||
|updatedAt|string| Update time||

## POST Modifying User Information

POST http://xxx:3000/user/editUser

> Body Request parameter

```json
{
  "id": 6,
  "userName": "Joe",
  "googleAccount": "Joe@gmail.com"
}
```

### Request parameter

|Title|Position|Type|Mandatory|state|
|---|---|---|---|---|
|Authorization|header|string| Yes |token|
|id|body|int| Yes |userId|
|userName|body|string| Yes |User name|
|googleAccount|body|string| Yes |Google email|

> Return example

```json
{
  "code": 200,
  "msg": "Operation Success!",
  "data": 1
}
```

### Return result
|Status code|Status code meaning|Description|
|---|---|---|
|200|SUCCESS|Success|
|401|FAIL|Invalid token|
|404|FAIL|Request method not found|
|500|FAIL|server error|

### Return data structure
|Title|Type|Description|Remarks|
|---|---|---|---|
|code|string| Status code ||
|msg|string| Returned message ||
|data|int| Returned data||

## POST Querying user information

POST http://xxx:3000/user/getUser

> Body Request parameter

```json
{
  "id": 2
}
```

### Request parameter

|Title|Position|Type|Mandatory|state|
|---|---|---|---|---|
|Authorization|header|string| Yes |token|
|id|body|int| Yes |userId|


> Return example

```json
{
  "code": 200,
  "msg": "Operation Success!",
  "data": {
    "id": 2,
    "userName": "Eric",
    "googleAccount": "Eric@gmail.com",
    "googleToken": "tokenxxxxxxxx",
    "createdAt": "2023-03-28T13:09:58.000Z",
    "updatedAt": "2023-03-28T13:09:58.000Z"
  }
}
```

### Return result
|Status code|Status code meaning|Description|
|---|---|---|
|200|SUCCESS|Success|
|401|FAIL|Invalid token|
|404|FAIL|Request method not found|
|500|FAIL|server error|

### Return data structure
|Title|Type|Description|Remarks|
|---|---|---|---|
|code|string| Status code ||
|msg|string| Returned message ||
|data|int| Returned data||

### data parameter specification
|Title|Type|Description|Remarks|
|---|---|---|---|
|id|int| User id ||
|userName|string| User name ||
|googleAccount|string| Google email||
|googleToken|string| Google token||
|createdAt|string| Creation time||
|updatedAt|string| Update time||

## POST Add an app

POST http://xxx:3000/app/createApp

> Body Request parameter

```json
{
  "roleMemberSheet": "https://docs.google.com/spreadsheets/d/1ZLjzkVykrdcMZfi6sqQ59ktmHrhC3H2Jqt7ur90lOTY/edit#gid=0",
  "savedDataUrl": "https://docs.google.com/spreadsheets/d/1ZLjzkVykrdcMZfi6sqQ59ktmHrhC3H2Jqt7ur90lOTY/edit#gid=1",
  "published": "false",
  "developer": "2",
  "appName": "the first app"
}
```

### Request parameter
|Title|Position|Type|Mandatory|state|
|---|---|---|---|---|
|Authorization|header|string| Yes |token|
|roleMemberSheet|body|string| Yes |Google Authorization url|
|savedDataUrl|body|string| Yes |Google Data url|
|published|body|string| Yes |Publish or not|
|developer|body|string| NO |App Name|
|appName|body|string| Yes |App Name|

> Return example

```json
{
    "code": 200,
    "msg": "Operation Success!",
    "data": {
        "id": 34,
        "userId": 7,
        "endUserIds": "",
        "developer": "7",
        "appName": "the first app",
        "roleMemberSheet": "https://docs.google.com/spreadsheets/d/1ZLjzkVykrdcMZfi6sqQ59ktmHrhC3H2Jqt7ur90lOTY/edit#gid=0",
        "savedDataUrl": "https://docs.google.com/spreadsheets/d/1ZLjzkVykrdcMZfi6sqQ59ktmHrhC3H2Jqt7ur90lOTY/edit#gid=1",
        "published": "false",
        "updatedAt": "2023-03-19T09:39:58.448Z",
        "createdAt": "2023-03-19T09:39:58.448Z"
    }
}
```

### Return result
|Status code|Status code meaning|Description|
|---|---|---|
|200|SUCCESS|Success|
|401|FAIL|Invalid token|
|404|FAIL|Request method not found|
|500|FAIL|server error|


### Return data structure
|Title|Type|Description|Remarks|
|---|---|---|---|
|code|string| Status code ||
|msg|string| Returned message ||
|data|string| Returned data||
### data Parameter description
|Title|Type|Description|Remarks|
|---|---|---|---|
|id|int| id ||
|userId|int| User id ||
|endUserIds|string| End user id set ||
|developer|string| Developer ||
|appName|string| App Name ||
|roleMemberSheet|string| Google Authorization url ||
|savedDataUrl|string| Google Data url||
|published|string| Publish or not||
|createdAt|string| Creation time||
|updatedAt|string| Update time||

## POST Modify the app publishing status

POST http://xxx:3000/app/editApp

> Body Request parameter

```json
{
  "id": 20,
  "userId": 7,
  "roleMemberSheet": "https://docs.google.com/spreadsheets/d/1ZLjzkVykrdcMZfi6sqQ59ktmHrhC3H2Jqt7ur90lOTY/edit#gid=0",
  "savedDataUrl": "https://docs.google.com/spreadsheets/d/1ZLjzkVykrdcMZfi6sqQ59ktmHrhC3H2Jqt7ur90lOTY/edit#gid=1",
  "published": "true",
  "developer": "2",
  "appName": "the first app"

}
```

### Request parameter
|Title|Position|Type|Mandatory|state|
|---|---|---|---|---|
|Authorization|header|string| Yes |token|
|id|body|int| Yes |appId|
|userId|body|int| Yes |userId|
|roleMemberSheet|body|string| Yes |Google Authorization url|
|savedDataUrl|body|string| Yes |Google Data url|
|published|body|string| Yes |Publish or not|
|developer|body|string| NO |App Name|
|appName|body|string| Yes |App Name|


> Return example

```json
{
    "code": 200,
    "msg": "Operation Success!",
    "data": 1
}
```

### Return result
|Status code|Status code meaning|Description|
|---|---|---|
|200|SUCCESS|Success|
|401|FAIL|Invalid token|
|404|FAIL|Request method not found|
|500|FAIL|server error|

### Return data structure
|Title|Type|Description|Remarks|
|---|---|---|---|
|code|string| Status code ||
|msg|string| Returned message ||
|data|int| Returned data

## POST Search app

POST http://xxx:3000/app/getApp

> Body Request parameter

```json
{
  
}
```

### Request parameter
|Title|Position|Type|Mandatory|state|
|---|---|---|---|---|
|Authorization|header|string| Yes |token|
|body|body|object| Yes |none|

> Return example

```json
{
    "code": 200,
    "msg": "Operation Success!",
    "data": [
        {
            "id": 27,
            "userId": 7,
            "roleMemberSheet": "https://docs.google.com/spreadsheets/d/1ZLjzkVykrdcMZfi6sqQ59ktmHrhC3H2Jqt7ur90lOTY/edit#gid=0",
            "savedDataUrl": "https://docs.google.com/spreadsheets/d/1ZLjzkVykrdcMZfi6sqQ59ktmHrhC3H2Jqt7ur90lOTY/edit#gid=1",
            "endUserIds": "11,11,3,2",
            "developer": "2",
            "appName": "the first app",
            "published": "false",
            "createdAt": "2023-03-18T04:59:10.000Z",
            "updatedAt": "2023-03-19T09:24:38.000Z"
        },
        {
            "id": 29,
            "userId": 8,
            "roleMemberSheet": "https://docs.google.com/spreadsheets/d/1ZLjzkVykrdcMZfi6sqQ59ktmHrhC3H2Jqt7ur90lOTY/edit#gid=0",
            "savedDataUrl": "https://docs.google.com/spreadsheets/d/1ZLjzkVykrdcMZfi6sqQ59ktmHrhC3H2Jqt7ur90lOTY/edit#gid=1",
            "endUserIds": "7",
            "developer": "2",
            "appName": "the first app",
            "published": "true",
            "createdAt": "2023-03-19T03:49:30.000Z",
            "updatedAt": "2023-03-19T03:49:30.000Z"
        }
    ]
}
```

### Return result
|Status code|Status code meaning|Description|
|---|---|---|
|200|SUCCESS|Success|
|401|FAIL|Invalid token|
|404|FAIL|Request method not found|
|500|FAIL|server error|

### Return data structure
|Title|Type|Description|Remarks|
|---|---|---|---|
|code|string| Status code ||
|msg|string| Returned message ||
|data|string| Returned data||

### data Parameter description
|Title|Type|Description|Remarks|
|---|---|---|---|
|id|int| id ||
|userId|int| User id ||
|endUserIds|string| End user id set ||
|developer|string| Developer ||
|appName|string| App Name ||
|roleMemberSheet|string| Google Authorization url  ||
|savedDataUrl|string| Google Data url||
|published|string| Publish or not||
|createdAt|string| Creation time||
|updatedAt|string| Update time||

## POST Delete app

POST http://xxx:3000/app/deleteApp

> Body Request parameter

```json
{
  "id": 20,
  "userId": 1
}
```

### Request parameter
|Title|Position|Type|Mandatory|state|
|---|---|---|---|---|
|Authorization|header|string| Yes |token|
|id|body|int| No |appId|
|userId|body|int| No |userId|

> Return example

```json
{
  "code": 200,
  "msg": "Operation Success!",
  "data": 1
}
```

### Return result

|Status code|Status code meaning|Description|
|---|---|---|
|200|SUCCESS|Success|
|401|FAIL|Invalid token|
|404|FAIL|Request method not found|
|500|FAIL|server error|

### Return data structure
|Title|Type|Description|Remarks|
|---|---|---|---|
|code|string| Status code ||
|msg|string| Returned message ||
|data|int| Returned data||

## POST Shareapp

POST http://xxx:3000/app/shareApp

> Body Request parameter

```json
{
  "appId": 27,
  "endUserId": 3
}
```

### Request parameter

|Title|Position|Type|Mandatory|state|
|---|---|---|---|---|
|Authorization|header|string| Yes |token|
|appId|body|int| Yes |appId|
|endUserId|body|int| Yes |End user id|

> Return example

```json
{
  "code": 200,
  "msg": "Operation Success!",
  "data": 1
}
```

### Return result

|Status code|Status code meaning|Description|
|---|---|---|
|200|SUCCESS|Success|
|401|FAIL|Invalid token|
|404|FAIL|Request method not found|
|500|FAIL|server error|

### Return data structure
|Title|Type|Description|Remarks|
|---|---|---|---|
|code|string| Status code ||
|msg|string| Returned message ||
|data|int| Returned data||


## POST Add a view

POST http://xxx:3000/view/addView

> Body Request parameter

```json
{
  "appId": 30,
  "userId": 2,
  "viewName": "Viewname",
  "savedDataUrl": "https://docs.google.com/spreadsheets/d/1ZLjzkVykrdcMZfi6sqQ59ktmHrhC3H2Jqt7ur90lOTY/edit#gid=1",
  "columns": 5,
  "viewType": "7",
  "allowedActions": "edit",
  "roles": "endUser"
}
```

### Request parameter

|Title|Position|Type|Mandatory|state|
|---|---|---|---|---|
|Authorization|header|string| Yes |token|
|appId|body|int| Yes |appId|
|userId|body|int| Yes |userId|
|viewName|body|string| Yes |view name|
|savedDataUrl|body|string| Yes |Google Data url|
|columns|body|int| Yes |columns|
|viewType|body|string| Yes |view type|
|allowedActions|body|string| Yes |allowed actions|
|roles|body|string| Yes |roles|

> Return example

```json
{
  "code": 200,
  "msg": "Operation Success!",
  "data": {
    "id": 8,
    "appId": 30,
    "viewName": "Name",
    "savedDataUrl": "https://docs.google.com/spreadsheets/d/1ZLjzkVykrdcMZfi6sqQ59ktmHrhC3H2Jqt7ur90lOTY/edit#gid=1",
    "columns": 5,
    "viewType": "7",
    "allowedActions": "edit",
    "roles": "endUser",
    "updatedAt": "2023-03-19T11:26:47.111Z",
    "createdAt": "2023-03-19T11:26:47.111Z"
  }
}
```

### Return result
|Status code|Status code meaning|Description|
|---|---|---|
|200|SUCCESS|Success|
|401|FAIL|Invalid token|
|404|FAIL|Request method not found|
|500|FAIL|server error|

### Return data structure
|Title|Type|Description|Remarks|
|---|---|---|---|
|code|string| Status code ||
|msg|string| Returned message ||
|data|string| Returned data||

### data Parameter description
|Title|Type|Description|Remarks|
|---|---|---|---|
|id|int| id ||
|appId|int| app id ||
|viewName|string| view name ||
|savedDataUrl|string| Google Data url||
|columns|int| columns||
|viewType|string| view type||
|allowedActions|string| allowed actions||
|roles|string| roles||
|createdAt|string| Creation time||
|updatedAt|string| Update time||

## POST Modifying view Information

POST http://xxx:3000/view/editView

> Body Request parameter

```json
{
  "id": 1,
  "appId": 27,
  "viewName": "View name",
  "savedDataUrl": "https://docs.google.com/spreadsheets/d/1ZLjzkVykrdcMZfi6sqQ59ktmHrhC3H2Jqt7ur90lOTY/edit#gid=1",
  "columns": 5,
  "viewType": "7",
  "allowedActions": "edit",
  "roles": "endUser"
}
```

### Request parameter

|Title|Position|Type|Mandatory|state|
|---|---|---|---|---|
|Authorization|header|string| Yes |token|
|id|body|int| Yes |viewId|
|appId|body|int| Yes |appId|
|viewName|body|int| Yes |view Name|
|savedDataUrl|body|int| Yes |Google Data url|
|columns|body|int| Yes |columns|
|viewType|body|string| Yes |view type|
|allowedActions|body|string| Yes |allowed actions|
|roles|body|string| Yes |roles|


> Return example

```json
{
  "code": 200,
  "msg": "Operation Success!",
  "data": 1
}
```

### Return result

|Status code|Status code meaning|Description|
|---|---|---|
|200|SUCCESS|Success|
|401|FAIL|Invalid token|
|404|FAIL|Request method not found|
|500|FAIL|server error|

### Return data structure
|Title|Type|Description|Remarks|
|---|---|---|---|
|code|string| Status code ||
|msg|string| Returned message ||
|data|int| Returned data||

## POST Delete view

POST http://xxx:3000/view/deleteView

> Body Request parameter

```json
{
  "id": 7,
  "appId": 27
}
```

### Request parameter

|Title|Position|Type|Mandatory|state|
|---|---|---|---|---|
|Authorization|header|string| Yes |token|
|id|body|int| Yes |viewId|
|appId|body|int| Yes |appId|

> Return example

```json
{
  "code": 200,
  "msg": "Operation Success!",
  "data": 1
}
```

### Return result

|Status code|Status code meaning|Description|
|---|---|---|
|200|SUCCESS|Success|
|401|FAIL|Invalid token|
|404|FAIL|Request method not found|
|500|FAIL|server error|

### Return data structure
|Title|Type|Description|Remarks|
|---|---|---|---|
|code|string| Status code ||
|msg|string| Returned message ||
|data|int| Returned data||

## POST Search view

POST http://xxx:3000/view/getView

> Body Request parameter

```json
{
  "appId": 7
}
```

### Request parameter

|Title|Position|Type|Mandatory|state|
|---|---|---|---|---|
|Authorization|header|string| Yes |token|
|appId|body|int| Yes |appId|

> Return example

```json
{
  "code": 200,
  "msg": "Operation Success!",
  "data": [
    {
      "id": 1,
      "appId": 27,
      "viewName": "View name",
      "savedDataUrl": "https://docs.google.com/spreadsheets/d/1ZLjzkVykrdcMZfi6sqQ59ktmHrhC3H2Jqt7ur90lOTY/edit#gid=1",
      "columns": 5,
      "viewType": "",
      "allowedActions": "edit",
      "roles": "endUser",
      "createdAt": "2023-03-18T05:17:33.000Z",
      "updatedAt": "2023-03-18T05:19:29.000Z"
    },
    {
      "id": 3,
      "appId": 27,
      "viewName": "view name2",
      "columns": 5,
      "viewType": "",
      "allowedActions": "edit",
      "roles": "endUser",
      "savedDataUrl": "https://docs.google.com/spreadsheets/d/1ZLjzkVykrdcMZfi6sqQ59ktmHrhC3H2Jqt7ur90lOTY/edit#gid=1",
      "createdAt": "2023-03-19T06:02:18.000Z",
      "updatedAt": "2023-03-19T06:02:18.000Z"
    }
  ]
}
```

### Return result

|Status code|Status code meaning|Description|
|---|---|---|
|200|SUCCESS|Success|
|401|FAIL|Invalid token|
|404|FAIL|Request method not found|
|500|FAIL|server error|

### Return data structure
|Title|Type|Description|Remarks|
|---|---|---|---|
|code|string| Status code ||
|msg|string| Returned message ||
|data|string| Returned data||

### data Parameter description
|Title|Type|Description|Remarks|
|---|---|---|---|
|id|int| id ||
|appId|int| app id ||
|viewName|string| view name ||
|savedDataUrl|string| Google Data url||
|columns|int| columns||
|viewType|string| view type||
|allowedActions|string| allowed actions||
|roles|string| roles||
|createdAt|string| Creation time||
|updatedAt|string| Update time||